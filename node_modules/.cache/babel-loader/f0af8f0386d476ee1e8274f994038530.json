{"ast":null,"code":"var _jsxFileName = \"/home/santiago/Trybe/myprojects/sd-09-project-trivia-react-redux/src/components/question.js\";\nimport React from 'react';\nimport { connect } from 'react-redux';\nimport { PropTypes } from 'prop-types';\nimport { setNext, setSelectedAnswer, setScore } from '../redux/actions';\nimport '../css/questions.css';\n\nclass Question extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      assertions: 0\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.savePlayerStatus = this.savePlayerStatus.bind(this);\n    this.calculateScore = this.calculateScore.bind(this);\n  }\n\n  componentDidMount() {\n    localStorage.setItem('state', JSON.stringify({\n      player: {\n        name: '',\n        assertions: '',\n        score: 0,\n        gravatarEmail: ''\n      }\n    }));\n  }\n\n  handleClick({\n    target\n  }) {\n    const _this$props = this.props,\n          propSetNext = _this$props.propSetNext,\n          handleAnswer = _this$props.handleAnswer,\n          propSelectedAnswer = _this$props.propSelectedAnswer;\n    handleAnswer();\n    propSelectedAnswer(target);\n    propSetNext();\n    console.log('click 1');\n    this.savePlayerStatus(target);\n  }\n\n  savePlayerStatus(target) {\n    const _this$props2 = this.props,\n          name = _this$props2.name,\n          score = _this$props2.score,\n          token = _this$props2.token,\n          difficulty = _this$props2.question.difficulty;\n    const assertions = this.state.assertions;\n\n    if (target.className === 'correct') {\n      this.setState({\n        assertions: assertions + 1\n      });\n      this.calculateScore(difficulty);\n      console.log('click 2', score);\n    }\n\n    localStorage.setItem('state', JSON.stringify({\n      player: {\n        name,\n        assertions,\n        score,\n        gravatarEmail: token\n      }\n    }));\n  }\n\n  calculateScore(level) {\n    const _this$props3 = this.props,\n          propSetScore = _this$props3.propSetScore,\n          time = _this$props3.time;\n    const assertions = this.state.assertions;\n    const correct = 10;\n    const levelStatus = {\n      easy: 1,\n      medium: 2,\n      hard: 3\n    };\n    let pointsLevel = 0;\n\n    if (level === 'easy') {\n      pointsLevel = levelStatus.easy;\n    }\n\n    if (level === 'medium') {\n      pointsLevel = levelStatus.medium;\n    }\n\n    if (level === 'hard') {\n      pointsLevel = levelStatus.hard;\n    }\n\n    const points = assertions * correct + time * pointsLevel;\n    console.log(points);\n    propSetScore(points);\n  }\n\n  render() {\n    const _this$props4 = this.props,\n          disabled = _this$props4.disabled,\n          selectedAnswer = _this$props4.selectedAnswer,\n          _this$props4$question = _this$props4.question,\n          correctAnswer = _this$props4$question.correct_answer,\n          incorrectAnswers = _this$props4$question.incorrect_answers,\n          question = _this$props4$question.question,\n          category = _this$props4$question.category;\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      \"data-testid\": \"question-category\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, category), React.createElement(\"h2\", {\n      \"data-testid\": \"question-text\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, question), React.createElement(\"button\", {\n      \"data-testid\": \"correct-answer\",\n      type: \"button\",\n      className: selectedAnswer && 'correct',\n      onClick: this.handleClick,\n      disabled: disabled,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, correctAnswer), incorrectAnswers.map((element, i) => React.createElement(\"button\", {\n      \"data-testid\": `wrong-answer-${i}`,\n      type: \"button\",\n      key: element,\n      className: selectedAnswer && 'incorrect',\n      onClick: this.handleClick,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, element)));\n  }\n\n}\n\nQuestion.propTypes = {\n  disabled: PropTypes.bool,\n  handleAnswer: PropTypes.func,\n  question: PropTypes.shape({\n    correct_answer: PropTypes.string,\n    incorrect_answers: PropTypes.arrayOf(PropTypes.string),\n    question: PropTypes.string,\n    category: PropTypes.string\n  })\n}.isRequired;\n\nconst mapStateToProps = ({\n  actionsReducer: {\n    selectedAnswer,\n    name,\n    token,\n    score\n  }\n}) => ({\n  selectedAnswer,\n  name,\n  token,\n  score\n});\n\nconst mapDispatchToProps = dispatch => ({\n  propSetNext: () => dispatch(setNext()),\n  propSelectedAnswer: selectedAnswer => dispatch(setSelectedAnswer(selectedAnswer)),\n  propSetScore: points => dispatch(setScore(points))\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);","map":{"version":3,"sources":["/home/santiago/Trybe/myprojects/sd-09-project-trivia-react-redux/src/components/question.js"],"names":["React","connect","PropTypes","setNext","setSelectedAnswer","setScore","Question","Component","constructor","props","state","assertions","handleClick","bind","savePlayerStatus","calculateScore","componentDidMount","localStorage","setItem","JSON","stringify","player","name","score","gravatarEmail","target","propSetNext","handleAnswer","propSelectedAnswer","console","log","token","difficulty","question","className","setState","level","propSetScore","time","correct","levelStatus","easy","medium","hard","pointsLevel","points","render","disabled","selectedAnswer","correctAnswer","correct_answer","incorrectAnswers","incorrect_answers","category","map","element","i","propTypes","bool","func","shape","string","arrayOf","isRequired","mapStateToProps","actionsReducer","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { connect } from 'react-redux';\nimport { PropTypes } from 'prop-types';\nimport { setNext, setSelectedAnswer, setScore } from '../redux/actions';\nimport '../css/questions.css';\n\nclass Question extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      assertions: 0,\n    };\n\n    this.handleClick = this.handleClick.bind(this);\n    this.savePlayerStatus = this.savePlayerStatus.bind(this);\n    this.calculateScore = this.calculateScore.bind(this);\n  }\n\n  componentDidMount() {\n    localStorage.setItem('state', JSON.stringify({\n      player: {\n        name: '',\n        assertions: '',\n        score: 0,\n        gravatarEmail: '',\n      },\n    }));\n  }\n\n  handleClick({ target }) {\n    const { propSetNext, handleAnswer, propSelectedAnswer } = this.props;\n    handleAnswer();\n    propSelectedAnswer(target);\n    propSetNext();\n    console.log('click 1');\n    this.savePlayerStatus(target);\n  }\n\n  savePlayerStatus(target) {\n    const { name, score, token, question: { difficulty } } = this.props;\n    const { assertions } = this.state;\n    if (target.className === 'correct') {\n      this.setState({\n        assertions: assertions + 1,\n      });\n      this.calculateScore(difficulty);\n      console.log('click 2', score);\n    }\n\n    localStorage.setItem('state', JSON.stringify({\n      player: {\n        name,\n        assertions,\n        score,\n        gravatarEmail: token,\n      },\n    }));\n  }\n\n  calculateScore(level) {\n    const { propSetScore, time } = this.props;\n    const { assertions } = this.state;\n    const correct = 10;\n    const levelStatus = {\n      easy: 1,\n      medium: 2,\n      hard: 3,\n    };\n    let pointsLevel = 0;\n\n    if (level === 'easy') {\n      pointsLevel = levelStatus.easy;\n    }\n\n    if (level === 'medium') {\n      pointsLevel = levelStatus.medium;\n    }\n\n    if (level === 'hard') {\n      pointsLevel = levelStatus.hard;\n    }\n\n    const points = (assertions * correct) + (time * pointsLevel);\n    console.log(points);\n    propSetScore(points);\n  }\n\n  render() {\n    const {\n      disabled,\n      selectedAnswer,\n      question: {\n        correct_answer: correctAnswer,\n        incorrect_answers: incorrectAnswers,\n        question,\n        category,\n      } } = this.props;\n    return (\n      <div>\n        <h2 data-testid=\"question-category\">{ category }</h2>\n        <h2 data-testid=\"question-text\">{ question }</h2>\n        <button\n          data-testid=\"correct-answer\"\n          type=\"button\"\n          className={ selectedAnswer && 'correct' }\n          onClick={ this.handleClick }\n          disabled={ disabled }\n        >\n          { correctAnswer }\n        </button>\n        {incorrectAnswers.map((element, i) => (\n          <button\n            data-testid={ `wrong-answer-${i}` }\n            type=\"button\"\n            key={ element }\n            className={ selectedAnswer && 'incorrect' }\n            onClick={ this.handleClick }\n          >\n            {element }\n          </button>\n        )) }\n      </div>\n    );\n  }\n}\n\nQuestion.propTypes = {\n  disabled: PropTypes.bool,\n  handleAnswer: PropTypes.func,\n  question: PropTypes.shape({\n    correct_answer: PropTypes.string,\n    incorrect_answers: PropTypes.arrayOf(PropTypes.string),\n    question: PropTypes.string,\n    category: PropTypes.string,\n  }),\n}.isRequired;\n\nconst mapStateToProps = ({ actionsReducer: { selectedAnswer, name, token, score } }) => ({\n  selectedAnswer,\n  name,\n  token,\n  score,\n});\n\nconst mapDispatchToProps = (dispatch) => ({\n  propSetNext: () => dispatch(setNext()),\n  propSelectedAnswer: (selectedAnswer) => dispatch(setSelectedAnswer(selectedAnswer)),\n  propSetScore: (points) => dispatch(setScore(points)),\n});\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Question);\n"]},"metadata":{},"sourceType":"module"}